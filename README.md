# Тестовое задание Python разработчик
___

## Требования к стеку

1. Python 3.10
2. Django 4.2
3. Django Rest Framework
4. DRF-YASG для документации

## Требования к заданию

1. Для проверки необходимо предоставить ссылку на репозиторий. 
Если есть желание развернуть на хостинге, можно приложить еще url
2. При выполнении задания на иной версии питона - докеризовать. В ином случае по желанию.
3. Оформить README файл с основной информацией о проекте, включая поэтапный запуск.
4. Если будут использоваться переменные окружения (`.env`), добавить в репозиторий файл
`.env.example` со списком необходимых переменных
5. Будет неплохо, если будет оформленный `Makefile` с командами.
6. В качестве БД предпочтительнее MariaDB. Другие варианты не возбраняются.

## Задание

1. Реализовать REST API для интернет-магазина по продаже книг. +
2. Реализовать ручки каталога. +
   1. Получение всех книг. +
   2. Получение всех книг определенной категории. +
   3. Получение категорий текущего уровня и на 1 ниже. +
   4. Получение конкретной книги. +
3. Авторизация +
4. Форма обратной связи +
   1. Почта +
   2. Имя +
   3. Комментарий +
   4. Телефон +
5. Админ панель +

## Дополнительная информация

1. Данные о книгах вы можете найти в файле books.json +
   1. Данный файл должен запрашиваться по сети. +
   2. Изображения должны сохраняться в проекте. +
   3. При повторном парсинге не должно возникать дубликатов. +
   4. Если нет категории - добавлять в "Новинки". +
   5. Файл содержит намеренные ошибки в данных. +
2. Данные с каждой формы обратной связи должны храниться в БД. +
3. Информация с каталога должна пагинироваться +
4. Категория может иметь подкатегории. Задаваться подкатегория должна из админ панели. +

## Звездочка

1. Фильтрация по названию+
2. Фильтрация по автору+
3. Фильтрация по статусу+
4. Фильтрация по дате+
5. На странице одной книги передавать список из 5 книг, которые находятся в той же категории +


# Порядок работы

1. В терминале прописать make all для подготовки проекта и первого запуска
   1. В процессе инициализации, в терминале определить данные супер-пользователя

## Работа с ручками

### Ручки каталога.
1. Для первичного заполнения базы и получения всех книг данных необходимо перейти на /books
   1. В первую очередь производится скачивание JSON-файла c книгами с репозитория GitLab
   2. Во время первой инициализации базы данных, сервер-источник с картинками будет выкидывать таймаут 10 секунд, так что нужно немного подождать.
   В этот момент происходит загрузка изображений в папку "/media/book_images", если они отсутствуют
   3. Во время повторного парсинга не возникает дубликатов, поскольку производится проверка по названию книги
   4. Если поле у книги нет категории, то ей присваивается категория "New"
2. Для получения всех книг определенной категории необходимо перейти на /books/category/название категории
3. Для получения категорий текущего уровня и на 1 ниже необходимо перейти на /books/categories/номер уровня
4. Для получения конкретной книги необходимо перейти на /books/точное название книги
   1. Вместе с искомой книгой в ответ добавляются ещё 5 книг из той же категории, что и искомая книга
5. Все ответы с ручек пагинируются
   1. Присутствует возможность фильтрации по названию, автору, статусу, дате публикации

### Авторизация
1. Для авторизации необходимо отправить json на URL:  /login
   1. Формат JSON:
   {
      "username": "user123",
      "password": "my_password"
   }
   2. В случае успешной авторизации пользователю выдадутся access и refresh токены
   3. Добавить нового пользователя в список пользователей можно из админ-панели Django в таблице Users
     
### Форма обратной связи
1. Для перехода на страницу формы обратной связи необходимо перейти на /feedback
   1. После ввода данных в поля и отправки, в базу данных добавится соответствующая запись, 
   которую можно просмотреть в админ-панели в таблице Feedbacks

### Админ-панель
1. Для доступа к админ-панели, необходимо перейти на /admin
   1. Авторизация производится по ранее созданному из Makefile супер-юзеру
   2. В таблице Categorys можно создать новую категорию и назначить ей родительскую

### JSON-файл
1. Во время беглого анализа, было замечено, что JSON файл имеет следующие ошибки:
   1. ISBN имеет последним символом "X", вместо цифры
   2. В полях авторов встречаются "" (отслеживается) и Jr.
   3. В категориях встречаются "" (отслеживается)
   4. Коротокие и длинные описания могут состоять из ""
   5. Даты публикации может не быть
   6. В различных книгах встречаются MIchael Barlotta или Michael Barlotta или Michael J. Barlotta
   7. Книги имеют дубликаты: у книги с одним и тем же названием может быть и не быть категорий
2. Очистка данных JSON файла не реализована на момент отправки, поскольку в задании это не указано
